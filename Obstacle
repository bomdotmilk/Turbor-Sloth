extends Area2D

@export var speed := 220.0

func _process(delta):
	position.y += speed * delta
	var vp = get_viewport_rect()
	if position.y > vp.size.y + 64:
		queue_free()

func _ready():
	# connect signal ด้วย Callable (Godot 4 syntax)
	self.area_entered.connect(Callable(self, "_on_area_entered"))

func _on_area_entered(area):
	if area.name == "Player" or area.get_parent().name == "Player":
		# แจ้ง GameManager -> Game Over
		var gm = get_tree().get_root().get_node("Main").get_node("GameManager")
		if gm:
			gm.game_over()

